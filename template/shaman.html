<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../static/css/admin/pop.css">
<title>MagicBox -shaman modules page</title>
<style type="text/css">
.tr{padding:12px;}
</style>
</head>

<body>
<div class="tr">
	<span class="btn_bg"><input onClick="mb_pop('预 览','test.html','div')" type="button" class="btn" value="预 览"></span>
    <span class="btn_bg"><input onClick="mb_pop('修 改','test.html','iframe',800,500)" type="button" class="btn" value="修 改"></span>
    <span class="btn_bg"><input onClick="mb_pop('我要预测','test.html','modal_window',800,500)" type="button" class="btn" value="我要预测"></span>
</div>
<script type="text/javascript" src="../static/js/public/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
	$(window).resize(function(){
		var h=document.documentElement.clientHeight,
			w=document.documentElement.clientWidth;
	})
})

function mb_pop(a,b,c,d,e){
	var title,
		url,
		type  ="div",  //默认类型
		width =600,    //默认宽度
		height=400;    //默认高度
	var h=document.documentElement.clientHeight,
		w=document.documentElement.clientWidth;
	if(arguments.length==5){
		title =arguments[0];
		url   =arguments[1];
		type  =arguments[2];
		width =arguments[3];
		height=arguments[4];
	}
	else if(arguments.length==3){
		title =arguments[0];
		url   =arguments[1];
		type  =arguments[2];
	}else if(arguments.length==2){
		title =arguments[0];
		url   =arguments[1];
	}else{
		return;
	}
	$(".pop").remove();
	console.log(title+","+url+","+type+","+width+","+height);
	
	//添加遮罩层
	var mask='<div class="mask_layer"></div>';
	
	//弹出类型
	if(type=="div"){
		$(mask).addClass("perloading").appendTo("body");
		var mb_pop_window='<div class="pop" style="display:none;height:'+(h-200)+'px;margin-top:-'+(h-200)/2+'px">'+
							'<div class="pop_title">'+
								'<h2 class="pop_hd">'+title+'</h2>'+
								'<span class="pr pop_button"><a title="全屏" class="fullscreen" href="#"></a><a title="最小化" class="min" href="#"></a><a title="最大化" class="max" href="#"></a><a title="关闭" class="close" href="#"></a></span>'+
							'</div>'+
							'<div class="pop_cont">'+
								'<div class="pop_cont_c" style="height:'+(h-256)+'px;overflow-y:auto;overflow-x:hidden">'+
								'</div>'+
							'</div>'+
						  '</div>';
		$(mb_pop_window).appendTo("body");
		$(".pop_cont_c").load(url,function(){
			var w=$(this).find("#wrap").outerWidth();
			$(".mask_layer").removeClass("perloading");
			$(".pop").css({"margin-left":-(w+35)/2}).delay(200).fadeIn(300);
		})
		$(window).resize(function(){
			var h=document.documentElement.clientHeight,
				w=document.documentElement.clientWidth;
		})
	}
	if(type=="iframe"){
		var mb_pop_window='<div class="pop" style="width:'+width+'px;height:'+height+'px;margin-top:-'+height/2+'px;margin-left:-'+width/2+'px">'+
							'<div class="pop_title">'+
								'<h2 class="pop_hd">'+title+'</h2>'+
								'<span class="pr pop_button"><a title="全屏" class="fullscreen" href="#"></a><a title="最小化" class="min" href="#"></a><a title="最大化" class="max" href="#"></a><a title="关闭" class="close" href="#"></a></span>'+
							'</div>'+
							'<div class="pop_cont">'+
								'<div class="pop_cont_c" style="height:'+(height-56)+'px">'+
								'</div>'+
							'</div>'+
						  '</div>';
		$(mb_pop_window).appendTo("body");
		$("<iframe/>",{
			src:url,
			style:"border:0;width:100%;height:100%"
		}).appendTo(".pop_cont_c")
	}
	if(type=="modal_window"){
		var top=(h-height)/2,
			left=(w-width)/2;
		var modal_window=window.open(url,title,'width='+width+',height='+height+',top='+top+',left='+left+'location=no,toolbar=no,menubar=no,scrollbars=yes');
	}
}
</script>

</body>
</html>
